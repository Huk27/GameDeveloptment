# 🎯 FarmDashboard 상세 기획서

> **버전**: 2024-09-19 초안  
> **목적**: FarmDashboard 모드의 UX, 데이터, UI 연출을 탭 단위로 구체화하여 개발 착수 전 설계 신뢰도를 확보한다.

## 1. 사용자 정의
| 유형 | 플레이 성향 | 대시보드에서 기대하는 가치 |
|------|-------------|------------------------------|
| 전략가 | 장기 계획, 수익 극대화 | 작물/동물 투자 대비 수익, 성장 타이밍, 일일 목표 관리 |
| 탐험가 | 다양한 콘텐츠, 이벤트 참여 | 오늘의 이벤트, 축제 타이머, 새로운 알림 요소 |
| 효율 덕후 | 반복 최소화, 즉시 판단 | 즉각적인 경고, 남은 작업량, 경고 컬러 피드백 |

## 2. 핵심 경험 (Key Experience)
1. **하루 시작 15초** 안에 오늘의 수익 목표와 우선순위를 명확히 파악한다.
2. 필드 작업(낚시, 농사) 중 **HUD 토글 한 번**으로 현재 진행 상황을 확인한다.
3. 탭별로 들어가더라도 **2~3개의 시각 요소**만 읽어도 재미/동기부여를 느낀다.

## 3. 정보 구조 (Information Architecture)
```
HUD (요약)
 ↳ 메뉴 (F3)
    ↳ Overview 탭
    ↳ Crops 탭
    ↳ Animals 탭
    ↳ Time & Activity 탭
    ↳ Goals & Rewards 탭
    ↳ (향후) Community / Alerts 탭
```

## 4. HUD 설계
### 4.1 구성 요소
| 카드 | 데이터 | 업데이트 주기 | 사용자 반응 장치 |
|------|--------|---------------|------------------|
| Today Gold | `Game1.player.totalMoneyEarned - yesterday` | 10 in-game minutes | 목표 달성률 Progress Bar, 목표 초과 시 축하 색상 |
| Crop Pulse | 수확 준비 타일 수, 물 필요 타일 수 | 매 20 틱 | 경고 배경(주황/빨강), 클릭 시 메뉴 Crops 탭 오픈 |
| Animal Mood | 행복도 평균, 우유/알 준비 수 | 아침/저녁 | 행복도 하락 시 HUD에 스윙 애니메이션 |
| Activity Clock | 현재 시간, GPH(gold per hour) | 매 틱 | 시간대별 추천 메시지 (예: "광산 가기 좋은 날") |

- HUD 카드를 클릭하면 해당 주제 탭(Overview/Crops/Animals/Time & Activity)이 즉시 열려 사용자가 세부 정보를 이어서 확인할 수 있도록 한다.

### 4.2 HUD 레이아웃 (ASCII)
```
+-------------------------------------------------------------+
| GOLD TODAY  |  CROP PULSE   |  ANIMAL MOOD  | ACTIVITY CLOCK |
|  5,420g     |  Ready: 12    |  Happy: 6/8   |  02:10 PM      |
|  Goal 80%   |  Water: 4     |  Produce: 5   |  GPH: 1,120g   |
+-------------------------------------------------------------+
[F2] HUD 토글   [F3] 메뉴 열기   [Shift+F3] 탭 전환 퀵키
```

## 5. 메뉴 구조 및 탭 기획
### 5.1 공통 프레임
- StardewUI `lane` + `grid` 조합으로 16:9 기준 900x650 프레임
- 좌측 탭 리스트, 우측 메인 패널 구조
- 상단에는 오늘 날짜, 날씨, 행운 수치 배지 표시

### 5.2 와이어프레임 (Overview 탭 예시)
```
+------------------------------------------------------------------------+
| DAY 14 (SUMMER)   ☀️  날씨 맑음   🍀 행운 Good                          |
+------------------+-----------------------------------------------------+
| [Overview]       |  골드 플로우                                       |
| [Crops]          |  ------------------------------------------------   |
| [Animals]        | | 오늘 수익             |  목표 대비 (%)        | | |
| [Time & Activity]| |  5,420g (▲ 320)       |  80%                   | |
| [Goals & Rewards]|  ------------------------------------------------   |
| (Future) Alerts  |  작업 우선순위                                      |
|                  |  1) 블루베리 수확 (12칸)                            |
|  퀵 필터         |  2) 닭장 체크 (행복도 낮음)                         |
|  - 오늘만        |  3) 오후 6시, 낚시 버프 추천                        |
|  - 주간         |                                                       |
|                  |  새 소식                                            |
|                  |  - 내일 비 예보 → 물주기 스킵                       |
|                  |  - 댄스 축제 D-2                                    |
+------------------+-----------------------------------------------------+
```

### 5.3 탭별 상세 기획
#### A. Overview
- **콘텐츠**: 오늘 수익, 지출, 목표 달성률, 우선 작업 큐, 이벤트 알림
- **재미 요소**: 목표 초과 시 별 아이콘, 매일 다른 "Tip of the Day"
- **데이터 출처**: `Game1.player` 재정 기록, `Utility.getAllCharacters()` 이벤트

#### B. Crops 탭
| 섹션 | 설명 | 데이터 포인트 | UX 연출 |
|------|------|---------------|---------|
| 작물 요약 카드 | 계절별/밭별 수익성, 성장 진행 | 준비 수량, 예상 가치, 성장 % | 카드 컬러 + 진행/경고 텍스트 표시 |
| 물주기/비료 현황 | 부족한 타일 강조 | 물 부족 타일, 비료 잔여 일수 | 경고 행에 아이콘 + 진동 효과 |
| 성장 타임라인 | 수확 예정 캘린더 | 작물별 harvest tick, 최초 수확 예상 | `timeline` + "X일 뒤" 배지 |
| 인사이트 알림 | 즉시 조치 항목 | 물부족, 시든 작물, 재배 위치 | 경고 텍스트/아이콘으로 강조 |
| 추천 액션 | 오늘 해야 할 작업 | 씨앗 재구입, 스프링클러 설치 | 클릭 시 GMCM 링크 또는 외부 가이드 |

#### C. Animals 탭
- **메인 차트**: 동물 행복도 분포 (게이지 바)
- **생산 리포트**: 우유/알/털 생산량, 가공품 수익 비교
- **인사이트**: 연속 쓰다듬기 미실행일, 생산 여부, 경고(물/먹이/애정 부족)
- **재미 요소**: 행복도 최고인 동물에게 "Star Pet of the Day" 배지 부여

#### D. Time & Activity 탭
- 활동별 누적 시간 그래프 (농사/채광/낚시/전투/기타)
- 골드 per Hour 비교, 추천 루틴 (예: "광산 80층 → 낚시로 전환")
- 활동 추천: 상위 활동 요약 + 비활동 구간 경고, 다음 행동 제안 카드
- 시간대별 버프 및 이벤트 제안 (행운, 날씨 기반)
- 스케줄 영역: Player Calendar와 연동 (추가 구현 시 고려)

#### E. Goals & Rewards 탭
- 단기 목표 3개 슬롯 (자동 생성 + 사용자 정의 예정)
- 보상 시각화: 목표 달성 시 HUD 콘페티 애니메이션, 메뉴에서 배지 수집
- 진행률 표시: 게이지 + 예상 완료일 추정 (캐주얼 예측)
- 향후 연동: FarmStatistics 목표 시스템과 API 공유 가능성 열어둠

## 6. 시각 가이드
| 항목 | 규칙 |
|------|------|
| 컬러 팔레트 | 봄/여름/가을/겨울 테마, 경고 색상은 #F7B500 (주의), #FF6B6B (위험) |
| 타이포그래피 | 기본: 게임 폰트, 강조: Bold 110% 크기 |
| 아이콘 | HUD 기본 아이콘 24x24, 메뉴 내 32x32 (StardewUI SpriteSheet 재사용) |
| 애니메이션 | HUD 알림: 0.3초 scale in/out, 메뉴 그래프: 0.5초 ease-out |

## 7. 데이터 수집 전략 요약
| 데이터 | 소스 | 수집 방식 | 캐싱 |
|--------|------|-----------|------|
| 오늘 수익 | `Game1.player.Money` 변동 | `GameLoop.OneSecondUpdateTicked` | 하루 단위 누적 값 저장 |
| 작물 상태 | `GameLocation.terrainFeatures` | 새벽 6시 풀스캔 + HUD 요청 시 스냅샷 | `PerScreen` + `WeakReference` |
| 작물 인사이트 | CropAggregator + HoeDirt 정보 | 성장일수, 최초 수확 예상, 물부족 카운트 | Dictionary 캐시 + 알림 리스트 |
| 동물 행복도/인사이트 | `FarmAnimal` 리스트 | 아침, 저녁 2회 체크 + 연속 케어 추적 | 동물 ID별 캐시, 알림 메시지 생성 |
| 활동 시간 | `Game1.player.millisecondsPlayed` | `UpdateTicked`에서 delta 누적 | 최근 1일 rolling window |
| 활동 요약 | ActivitySummarySnapshot | 상위 활동·추천 메시지 계산 | PerScreen + 캐시 |
| 목표 진행 | 모드 내부 GoalService | 작업 완료 이벤트 트래킹 | JSON 저장 (향후) |

## 8. 상호작용 시나리오
1. **하루 시작**: 메뉴 → Overview → 추천 작업 클릭 → 해당 위치로 즉시 가이드 (미니맵 화살표 계획)
2. **작물 관리**: HUD 경고 → F3 → Crops 탭 → 물 부족 타일 리스트 → 좌표 복사 기능
3. **동물 케어**: Animals 탭 → 행복도 하락 동물 선택 → 팁 팝업 (좋아하는 간식 제안)
4. **목표 달성**: Goals 탭 → 완료 체크 → HUD에 축하 애니메이션 → 다음 목표 자동 제안

## 9. 개발 체크리스트
- [ ] StardewUI 탭 프레임 기본 구조 구현
- [ ] HUD 카드 컴포넌트 리팩터링 (재사용 가능 구조)
- [ ] 데이터 서비스(Lazy Update + 캐싱) 설계
- [ ] 목표 관리 로직 초안 작성
- [ ] 기본 컬러/아이콘 리소스 매핑표 작성

## 10. QA 포인트 (요약)
- HUD 카드 클릭 시 메뉴 탭 포커스 이동 확인
- SMAPI 로그에서 "FarmDashboard" 관련 경고가 없어야 함
- 탭별 로딩 시간 200ms 이하 (측정 스크립트 필요)
- GMCM 설정 변경 → HUD/메뉴 즉시 반영 여부 체크

## 11. 후속 문서 & 리소스
- 작업 기록: `docs/issues/FarmDashboard 작업 기록.md`
- 스타일 가이드 초안: (작성 예정) `docs/design/FarmDashboard UI 스타일 가이드.md`
- 개발 샘플: `samples/SpacechaseMods/UI-Examples/ExperienceBars`

---

> 본 문서는 개발 진행에 따라 업데이트된다. 변경 사항은 문서 상단 버전 정보에 날짜와 요약을 추가한다.
