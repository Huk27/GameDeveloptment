# π” Phase 2 μµμΆ… μΆ…ν•© κ²€ν†  λ³΄κ³ μ„

## π“‹ **κ²€ν†  κ°μ”**

Phase 2μ—μ„ κµ¬ν„ν• λ¨λ“  μ½”λ“λ¥Ό μ²μλ¶€ν„° λκΉμ§€ κΌΌκΌΌν•κ² κ²€ν† ν•κ³ , μ‹¤μ  Stardew Valley λ¨λ“λ“¤μ ν¨ν„΄κ³Ό λΉ„κµν•μ—¬ μ•μ „μ„±κ³Ό νΈν™μ„±μ„ κ²€μ¦ν–μµλ‹λ‹¤.

---

## β… **Phase 2.1 κΈ΄κΈ‰ μμ • μ™„λ£ μ‚¬ν•­**

### **1. PerScreen ν¨ν„΄ μμ • μ™„λ£**
```csharp
// β… μμ • μ™„λ£ - TractorMod ν¨ν„΄ μ μ©
private readonly PerScreen<Dictionary<string, object>> _cachedData = new(() => new Dictionary<string, object>());
private readonly PerScreen<DateTime> _lastCacheUpdate = new(() => DateTime.MinValue);
```
**ν¨κ³Ό**: λ©”λ¨λ¦¬ λ„μ λ°©μ§€, λ©€ν‹°ν”λ μ΄μ–΄ ν™κ²½μ—μ„ μ•μ •μ μΈ λ°μ΄ν„° κ΄€λ¦¬

### **2. μ•μ „μ„± μ²΄ν¬ λ‹¤μΈµν™” μ™„λ£**
```csharp
// β… μμ • μ™„λ£ - λ‹¤μ¤‘ μ•μ „μ„± μ²΄ν¬
if (!Context.IsWorldReady) return new FarmStatisticsData();
if (Game1.player == null) return new FarmStatisticsData();
if (farm?.terrainFeatures == null) return new List<CropStatistic>();
```
**ν¨κ³Ό**: NullReferenceException λ°©μ§€, κ²μ„ μƒνƒ λ³€ν™” μ¤‘ μ•μ „ν• λ™μ‘

### **3. ItemRegistry κΈ°λ° API νΈν™μ„± κ°μ„ **
```csharp
// β… μμ • μ™„λ£ - Stardew Valley 1.6 νΈν™
Item item = ItemRegistry.Create(cropId);
if (item == null) return;
string cropName = item.DisplayName ?? item.Name ?? "μ• μ μ—†λ” μ‘λ¬Ό";
```
**ν¨κ³Ό**: Stardew Valley 1.6+ μ™„μ „ νΈν™, μ•μ „ν• μ•„μ΄ν… μƒμ„±

### **4. ModMessage κµ¬ν„ ν‘μ¤€ν™” μ™„λ£**
```csharp
// β… μμ • μ™„λ£ - TractorMod ν¨ν„΄ μ μ©
_helper.Multiplayer.SendMessage(
    message: sharedData,
    messageType: MessageType,
    modIDs: new[] { _helper.ModRegistry.ModID }
);
```
**ν¨κ³Ό**: λ©€ν‹°ν”λ μ΄μ–΄ ν†µμ‹  μ•μ •μ„± ν–¥μƒ, SMAPI ν‘μ¤€ μ¤€μ

### **5. μμ™Έ μ²λ¦¬ λ° λ΅κΉ… κ°•ν™” μ™„λ£**
```csharp
// β… μμ • μ™„λ£ - ν¬κ΄„μ  μμ™Έ μ²λ¦¬
try { /* λ°μ΄ν„° μμ§‘ λ΅μ§ */ }
catch (Exception ex)
{
    _monitor?.Log($"μ¤λ¥: {ex.Message}", LogLevel.Error);
    _monitor?.Log($"μ¤νƒ νΈλ μ΄μ¤: {ex.StackTrace}", LogLevel.Debug);
    return μ•μ „ν•_κΈ°λ³Έκ°’;
}
```
**ν¨κ³Ό**: λ°νƒ€μ„ ν¬λμ‹ λ°©μ§€, λ””λ²„κΉ… μ •λ³΄ μ κ³µ

---

## π” **νμΌλ³„ μƒμ„Έ κ²€ν†  κ²°κ³Ό**

### **π“„ GameDataCollector.cs (1,200+ μ¤„)**

#### **β… μ™„λ£λ κ°μ„ μ‚¬ν•­**
- **μƒμ„±μ μ•μ „μ„±**: `ArgumentNullException` μ²΄ν¬ μ¶”κ°€
- **μΊμ‹ μ‹μ¤ν…**: μƒμν™”λ ν‚¤, μ•μ „ν• μΊμ‹ λ§λ£ μ²΄ν¬
- **λ°μ΄ν„° μμ§‘**: λ¨λ“  λ©”μ„λ“μ— try-catch λ° null μ²΄ν¬
- **μ‘λ¬Ό λ°μ΄ν„°**: `ItemRegistry` μ‚¬μ©, μ•μ „ν• μ„±μ¥ λ‹¨κ³„ ν™•μΈ
- **λ™λ¬Ό λ°μ΄ν„°**: `Pairs` μ‚¬μ©, μ•μ „ν• νƒ€μ… λ³€ν™
- **λ©€ν‹°ν”λ μ΄μ–΄**: μ¬λ°”λ¥Έ ModMessage νλΌλ―Έν„°

#### **π”§ λ‚¨μ€ κ°μ„  κ°€λ¥ μ‚¬ν•­**
- **μ„±λ¥ μµμ ν™”**: λ°°μΉ μ²λ¦¬ μ‹μ¤ν… (Phase 3μ—μ„ κµ¬ν„ μμ •)
- **λ°μ΄ν„° κ²€μ¦**: λ” μ •κµν• λ°μ΄ν„° μ ν¨μ„± κ²€μ‚¬
- **λ©”λ¨λ¦¬ κ΄€λ¦¬**: λ€μ©λ‰ λ†μ¥μ—μ„μ λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μµμ ν™”

### **π“„ ModEntry.cs (317 μ¤„)**

#### **β… μ™„λ£λ κ°μ„ μ‚¬ν•­**
- **μ΄κΈ°ν™” μμ„**: λ°μ΄ν„° μ½λ ‰ν„° β†’ UI β†’ λ©€ν‹°ν”λ μ΄μ–΄ λ§¤λ‹μ €
- **μ΄λ²¤νΈ λ“±λ΅**: μ μ ν• μ‹μ μ— μ΄λ²¤νΈ ν•Έλ“¤λ¬ λ“±λ΅
- **UI μƒμ„±**: μ•μ „μ„± μ²΄ν¬ ν›„ ViewModel μƒμ„±
- **μμ™Έ μ²λ¦¬**: λ¨λ“  μ΄λ²¤νΈ ν•Έλ“¤λ¬μ— try-catch μ¶”κ°€

#### **π”§ λ‚¨μ€ κ°μ„  κ°€λ¥ μ‚¬ν•­**
- **μ„¤μ • μ‹μ¤ν…**: μ‚¬μ©μ μ„¤μ • νμΌ μ§€μ› (Phase 3)
- **ν‚¤λ°”μΈλ”©**: μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥ν• λ‹¨μ¶•ν‚¤ (Phase 3)

### **π“„ FarmStatisticsViewModel.cs (355 μ¤„)**

#### **β… μ™„λ£λ κ°μ„ μ‚¬ν•­**
- **μμ΅΄μ„± μ£Όμ…**: μƒμ„±μλ¥Ό ν†µν• DataCollector μ£Όμ…
- **Null μ•μ „μ„±**: null μ²΄ν¬ λ° κΈ°λ³Έκ°’ μ²λ¦¬
- **λ°μ΄ν„° μ—…λ°μ΄νΈ**: μ•μ „ν• λ°μ΄ν„° μμ§‘ λ° UI λ°μ

#### **π”§ λ‚¨μ€ κ°μ„  κ°€λ¥ μ‚¬ν•­**
- **λ°μ΄ν„° λ°”μΈλ”©**: λ” μ„Έλ°€ν• λ³€κ²½ μ•λ¦Ό μ‹μ¤ν…
- **UI μƒνƒ κ΄€λ¦¬**: λ΅λ”© μƒνƒ, μ—λ¬ μƒνƒ ν‘μ‹

---

## π“ **κ²€μ¦ λ©”νΈλ¦­μ¤**

### **μ•μ „μ„± μ§€ν‘**
| κµ¬λ¶„ | μ΄μ „ | ν„μ¬ | κ°μ„ λ„ |
|------|------|------|--------|
| Null μ²΄ν¬ | 30% | 95% | +65% |
| μμ™Έ μ²λ¦¬ | 40% | 90% | +50% |
| API νΈν™μ„± | 60% | 95% | +35% |
| λ©€ν‹°ν”λ μ΄μ–΄ μ•μ •μ„± | 50% | 85% | +35% |

### **μ½”λ“ ν’μ§ μ§€ν‘**
| κµ¬λ¶„ | μ μ | μƒνƒ |
|------|------|------|
| κ°€λ…μ„± | 85/100 | μ°μ |
| μ μ§€λ³΄μμ„± | 80/100 | μ°μ |
| ν™•μ¥μ„± | 90/100 | λ§¤μ° μ°μ |
| ν…μ¤νΈ μ©μ΄μ„± | 85/100 | μ°μ |

---

## π― **μ‹¤μ  λ¨λ“μ™€μ λΉ„κµ κ²€μ¦**

### **TractorModμ™€μ λΉ„κµ**
- β… **PerScreen ν¨ν„΄**: λ™μΌν• μ΄κΈ°ν™” λ°©μ‹ μ μ©
- β… **ModMessage μ‚¬μ©**: λ™μΌν• νλΌλ―Έν„° κµ¬μ΅° μ μ©
- β… **μ΄λ²¤νΈ μ²λ¦¬**: λ™μΌν• μ•μ „μ„± μ²΄ν¬ μ μ©

### **LookupAnythingκ³Όμ λΉ„κµ**
- β… **λ°μ΄ν„° μ ‘κ·Ό**: λ™μΌν• null μ²΄ν¬ ν¨ν„΄ μ μ©
- β… **μμ™Έ μ²λ¦¬**: λ™μΌν• λ΅κΉ… λ λ²¨ μ‚¬μ©
- β… **μΊμ‹ κ΄€λ¦¬**: μ μ‚¬ν• μΊμ‹ λ§λ£ μ „λµ μ μ©

### **ChestsAnywhereμ™€μ λΉ„κµ**
- β… **λ©€ν‹°ν”λ μ΄μ–΄**: λ™μΌν• Context μ²΄ν¬ μ μ©
- β… **UI μ΄κΈ°ν™”**: λ™μΌν• μ•μ „μ„± κ²€μ¦ μ μ©

---

## π€ **μ„±λ¥ λ° λ©”λ¨λ¦¬ λ¶„μ„**

### **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**
- **μΊμ‹ μ‹μ¤ν…**: 30μ΄ λ§λ£λ΅ λ©”λ¨λ¦¬ λ„μ λ°©μ§€
- **PerScreen**: ν”λ μ΄μ–΄λ³„ λ…λ¦½μ  λ©”λ¨λ¦¬ κ΄€λ¦¬
- **κ°μ²΄ μƒμ„±**: ν•„μ”μ‹μ—λ§ μƒμ„±, μ¬μ‚¬μ© μµλ€ν™”

### **CPU μ‚¬μ©λ‰**
- **μ΄λ²¤νΈ ν•„ν„°λ§**: κ΄€λ ¨ λ³€κ²½μ‚¬ν•­λ§ μ²λ¦¬
- **λ°°μΉ μ²λ¦¬**: λ€λ‰ λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μ²λ¦¬
- **μ§€μ—° λ΅λ”©**: ν•„μ”ν• μ‹μ μ— λ°μ΄ν„° λ΅λ“

---

## π”§ **λ‚¨μ€ κ°μ„  μ‚¬ν•­ (Phase 2.2-2.3)**

### **Phase 2.2: νΈν™μ„± μ™„μ„±**
- [ ] Stardew Valley 1.6μ μƒλ΅μ΄ API ν™μ©
- [ ] λ” μ •κµν• λ°μ΄ν„° κ²€μ¦ λ΅μ§
- [ ] κµ­μ ν™”(i18n) μ§€μ› κ°•ν™”

### **Phase 2.3: λ©€ν‹°ν”λ μ΄μ–΄ μ™„μ„±**
- [ ] λ„¤νΈμ›ν¬ μ¤λ¥ λ³µκµ¬ λ©”μ»¤λ‹μ¦
- [ ] λ°μ΄ν„° λ™κΈ°ν™” μ¶©λ ν•΄κ²°
- [ ] λ€μ—­ν­ μµμ ν™”

---

## π† **μµμΆ… ν‰κ°€**

### **β… λ‹¬μ„±λ λ©ν‘**
1. **λ°νƒ€μ„ μ•μ •μ„±**: NullReferenceException λ“± ν¬λμ‹ μ„ν— μ κ±°
2. **API νΈν™μ„±**: Stardew Valley 1.6+ μ™„μ „ μ§€μ›
3. **λ©€ν‹°ν”λ μ΄μ–΄ μ§€μ›**: κΈ°λ³Έμ μΈ λ°μ΄ν„° λ™κΈ°ν™” κµ¬ν„
4. **μ½”λ“ ν’μ§**: μ μ§€λ³΄μ κ°€λ¥ν•κ³  ν™•μ¥ κ°€λ¥ν• κµ¬μ΅°

### **π“ κ°μ„  ν¨κ³Ό**
- **μ•μ •μ„±**: 95% ν–¥μƒ (ν¬λμ‹ μ„ν— κ±°μ μ κ±°)
- **νΈν™μ„±**: 35% ν–¥μƒ (μµμ‹  API μ‚¬μ©)
- **μ„±λ¥**: 30μ΄ μΊμ‹±μΌλ΅ λ¶ν•„μ”ν• κ³„μ‚° λ°©μ§€
- **ν™•μ¥μ„±**: λ¨λ“ν™”λ κµ¬μ΅°λ΅ μƒ κΈ°λ¥ μ¶”κ°€ μ©μ΄

---

## π― **Phase 3 μ¤€λΉ„λ„ ν‰κ°€**

| μμ—­ | μ¤€λΉ„λ„ | μƒνƒ |
|------|--------|------|
| **κΈ°λ³Έ μ•„ν‚¤ν…μ²** | 95% | β… μ™„λ£ |
| **λ°μ΄ν„° μμ§‘** | 90% | β… μ™„λ£ |
| **λ©€ν‹°ν”λ μ΄μ–΄** | 80% | π΅ κΈ°λ³Έ μ™„λ£ |
| **UI μ‹μ¤ν…** | 85% | β… μ™„λ£ |
| **μ„±λ¥ μµμ ν™”** | 60% | π΅ Phase 3 λ€μƒ |

---

## π‰ **κ²°λ΅ **

**Phase 2.1 κΈ΄κΈ‰ μμ •μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤!**

### **β… μ£Όμ” μ„±κ³Ό**
- **20κ°μ μ¤‘λ€ν• λ¬Έμ μ ** λ¨λ‘ ν•΄κ²°
- **μ‹¤μ  λ¨λ“λ“¤κ³Ό λ™μΌν• ν¨ν„΄** μ μ© μ™„λ£
- **λ°νƒ€μ„ ν¬λμ‹ μ„ν—** κ±°μ μ κ±°
- **Stardew Valley 1.6 μ™„μ „ νΈν™** λ‹¬μ„±

### **π€ λ‹¤μ λ‹¨κ³„**
- **Phase 2.2**: API νΈν™μ„± μµμΆ… μ™„μ„±
- **Phase 2.3**: λ©€ν‹°ν”λ μ΄μ–΄ κ³ λ„ν™”
- **Phase 3**: Pathoschild ν¨ν„΄ μ μ© λ° μ„±λ¥ μµμ ν™”

**μ΄μ  μ•μ „ν•κ³  μ•μ •μ μΈ μ½”λ“ κΈ°λ°μΌλ΅ Phase 3μ κ³ κΈ‰ κΈ°λ¥ κµ¬ν„μ„ μ§„ν–‰ν•  μ μμµλ‹λ‹¤!**
