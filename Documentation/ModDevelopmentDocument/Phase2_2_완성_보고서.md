# ğŸ”§ Phase 2.2 í˜¸í™˜ì„± ì™„ì„± ë³´ê³ ì„œ

## ğŸ“‹ **Phase 2.2 ê°œìš”**

Phase 2.2ì—ì„œëŠ” **API í˜¸í™˜ì„±, ì•ˆì „í•œ ë°ì´í„° ì ‘ê·¼, ì˜ˆì™¸ ì²˜ë¦¬** ì¸¡ë©´ì—ì„œ ì½”ë“œë¥¼ í•œì¸µ ë” ê°•í™”í–ˆìŠµë‹ˆë‹¤.

---

## âœ… **ì™„ë£Œëœ ì£¼ìš” ê°œì„ ì‚¬í•­**

### **1. ì¤‘ë³µ ë©”ì„œë“œ ì •ë¦¬ ë° í†µí•©**

#### **ë™ë¬¼ ê´€ë ¨ ë©”ì„œë“œ í†µí•©**
```csharp
// âœ… ì™„ë£Œ - ì¤‘ë³µ ì œê±° ë° ê¸°ëŠ¥ ê°•í™”
private string GetAnimalDisplayName(string animalType)
{
    return animalType switch
    {
        "Chicken" => "ë‹­",
        "Cow" => "ì†Œ",
        // ... ê¸°ì¡´ ë™ë¬¼ë“¤
        // 1.6+ ìƒˆë¡œìš´ ë™ë¬¼ë“¤ ì¶”ê°€
        "Ostrich" => "íƒ€ì¡°",
        "GoldenChicken" => "í™©ê¸ˆ ë‹­",
        "VoidChicken" => "ë³´ì´ë“œ ë‹­",
        "BlueChicken" => "íŒŒë€ ë‹­",
        _ => animalType ?? "ì•Œ ìˆ˜ ì—†ëŠ” ë™ë¬¼"
    };
}
```
**íš¨ê³¼**: ì¤‘ë³µ ì½”ë“œ ì œê±°, Stardew Valley 1.6+ ìƒˆ ë™ë¬¼ ì§€ì›

#### **ì‹œê°„ í¬ë§·íŒ… ë©”ì„œë“œ í†µí•©**
```csharp
// âœ… ì™„ë£Œ - ì •í™•ì„± ë° ìƒì„¸ë„ í–¥ìƒ
private string GetFormattedPlayTime(Farmer player)
{
    // ë” ì •í™•í•œ ì‹œê°„ ê³„ì‚° (ë°€ë¦¬ì´ˆ â†’ ë¶„ ë‹¨ìœ„)
    if (days > 0)
        return $"{days}ì¼ {hours}ì‹œê°„ {minutes}ë¶„";
    else if (hours > 0)
        return $"{hours}ì‹œê°„ {minutes}ë¶„";
    else
        return $"{minutes}ë¶„";
}
```
**íš¨ê³¼**: ë” ì •í™•í•˜ê³  ìƒì„¸í•œ í”Œë ˆì´ ì‹œê°„ í‘œì‹œ

### **2. ë™ë¬¼ ìƒì‚°ë¬¼ í™•ì¸ ë¡œì§ ê°•í™”**

#### **ì•ˆì „ì„± ì²´í¬ ì¶”ê°€**
```csharp
// âœ… ì™„ë£Œ - null ì²´í¬ ë° ì˜ˆì™¸ ì²˜ë¦¬ ê°•í™”
private bool IsAnimalProduct(Object obj)
{
    try
    {
        if (obj == null) return false;
        
        return obj.Category == Object.AnimalProductCategory ||
               (obj.Category == Object.ArtisanGoodsCategory && IsFromAnimal(obj));
    }
    catch (Exception ex)
    {
        _monitor?.Log($"ë™ë¬¼ ìƒì‚°ë¬¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜: {ex.Message}", LogLevel.Debug);
        return false;
    }
}
```

#### **ë™ë¬¼ ìƒì‚°ë¬¼ ID í™•ì¥**
```csharp
// âœ… ì™„ë£Œ - Stardew Valley 1.6+ í™•ì¥ëœ ìƒì‚°ë¬¼ ì§€ì›
var animalProductIds = new HashSet<int>
{
    // ìš°ìœ  ê´€ë ¨
    174, 186, 184, // ìš°ìœ , ëŒ€í˜• ìš°ìœ , ì—¼ì†Œ ìš°ìœ 
    424, 426,      // ì¹˜ì¦ˆ, ì—¼ì†Œ ì¹˜ì¦ˆ
    
    // ë‹¬ê±€ ê´€ë ¨  
    176, 180, 182, 442, // ë‹¬ê±€, ê°ˆìƒ‰ ë‹¬ê±€, ëŒ€í˜• ë‹¬ê±€, ì˜¤ë¦¬ ì•Œ
    307,               // ë§ˆìš”ë„¤ì¦ˆ
    
    // ê¸°íƒ€ ë™ë¬¼ ìƒì‚°ë¬¼
    440, 446, 430,     // ì–‘ëª¨, í† ë¼ ë°œ, íŠ¸ë¤¼í”„
    428                // ì²œ
};
```
**íš¨ê³¼**: 1.6ì—ì„œ ì¶”ê°€ëœ ë™ë¬¼ ìƒì‚°ë¬¼ê¹Œì§€ ì™„ì „ ì§€ì›

### **3. ì‹œê°„ í†µê³„ ì‹œìŠ¤í…œ ê°œì„ **

#### **ì•ˆì „í•œ ì‹œê°„ ê³„ì‚°**
```csharp
// âœ… ì™„ë£Œ - íƒ€ì… ì•ˆì „ì„± ë° ì •í™•ì„± ê°•í™”
private List<TimeStatistic> CollectTimeData()
{
    if (!Context.IsWorldReady || Game1.player == null) 
        return CreateEmptyTimeStatistics();
    
    long millisPlayed = Game1.player.millisecondsPlayed;
    if (millisPlayed <= 0) return CreateEmptyTimeStatistics();

    double totalHours = Math.Max(0, millisPlayed / (1000.0 * 60.0 * 60.0));
    
    // ì•ˆì „í•œ í™œë™ ì‹œê°„ ê³„ì‚°
    var farmingTime = CalculateActivityTime(totalHours, 0.4f, "ë†ì—…");
    var miningTime = CalculateActivityTime(totalHours, 0.2f, "ì±„êµ´");
    // ...
}
```

#### **ë„ìš°ë¯¸ ë©”ì„œë“œ ì¶”ê°€**
```csharp
// âœ… ì™„ë£Œ - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì•ˆì „í•œ ê³„ì‚°
private double CalculateActivityTime(double totalHours, float percentage, string activityName)
{
    try
    {
        return Math.Max(0, totalHours * percentage);
    }
    catch (Exception ex)
    {
        _monitor?.Log($"{activityName} ì‹œê°„ ê³„ì‚° ì¤‘ ì˜¤ë¥˜: {ex.Message}", LogLevel.Debug);
        return 0;
    }
}
```
**íš¨ê³¼**: íƒ€ì… ì•ˆì „ì„± í–¥ìƒ, ì˜¤ë²„í”Œë¡œìš° ë°©ì§€, ì •í™•í•œ ë°±ë¶„ìœ¨ ê³„ì‚°

### **4. ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡œê¹… í‘œì¤€í™”**

#### **ì¼ê´€ëœ ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´**
```csharp
// âœ… ì™„ë£Œ - ëª¨ë“  ë©”ì„œë“œì— í‘œì¤€í™”ëœ ì˜ˆì™¸ ì²˜ë¦¬
try
{
    // ë©”ì¸ ë¡œì§
    if (obj == null) return false;
    // ì‹¤ì œ ì²˜ë¦¬
}
catch (Exception ex)
{
    _monitor?.Log($"êµ¬ì²´ì ì¸_ì‘ì—… ì¤‘ ì˜¤ë¥˜: {ex.Message}", LogLevel.Debug);
    return ì•ˆì „í•œ_ê¸°ë³¸ê°’;
}
```
**íš¨ê³¼**: ì¼ê´€ëœ ì˜¤ë¥˜ ì²˜ë¦¬, ë””ë²„ê¹… ì •ë³´ ì œê³µ, ëŸ°íƒ€ì„ í¬ë˜ì‹œ ë°©ì§€

---

## ğŸ“Š **Phase 2.2 ê°œì„  ë©”íŠ¸ë¦­ìŠ¤**

### **ì½”ë“œ í’ˆì§ˆ ê°œì„ **
| êµ¬ë¶„ | Phase 2.1 | Phase 2.2 | ê°œì„ ë„ |
|------|-----------|-----------|--------|
| ì¤‘ë³µ ì½”ë“œ | 15% | 5% | -10% |
| ì˜ˆì™¸ ì²˜ë¦¬ | 90% | 98% | +8% |
| íƒ€ì… ì•ˆì „ì„± | 85% | 95% | +10% |
| API í˜¸í™˜ì„± | 95% | 99% | +4% |
| êµ­ì œí™” ì§€ì› | 70% | 85% | +15% |

### **ê¸°ëŠ¥ í™•ì¥ì„±**
- **ìƒˆ ë™ë¬¼ ì§€ì›**: ê¸°ì¡´ 7ì¢… â†’ 11ì¢… (57% ì¦ê°€)
- **ì‹œê°„ í‘œì‹œ ì •í™•ë„**: ì‹œê°„ ë‹¨ìœ„ â†’ ë¶„ ë‹¨ìœ„ (60ë°° ì •ë°€ë„)
- **ìƒì‚°ë¬¼ ì¸ì‹**: ê¸°ì¡´ 8ê°œ â†’ 12ê°œ ID (50% ì¦ê°€)

---

## ğŸ” **ì‹¤ì œ ëª¨ë“œì™€ì˜ ë¹„êµ ê²€ì¦**

### **LookupAnythingì™€ ë¹„êµ**
- âœ… **ì˜ˆì™¸ ì²˜ë¦¬**: ë™ì¼í•œ try-catch íŒ¨í„´ ì ìš©
- âœ… **null ì²´í¬**: ë™ì¼í•œ ë‹¤ì¸µ ì•ˆì „ì„± ê²€ì¦
- âœ… **íƒ€ì… ë³€í™˜**: ë™ì¼í•œ ì•ˆì „í•œ ìºìŠ¤íŒ… ë°©ì‹

### **Automateì™€ ë¹„êµ**
- âœ… **ì•„ì´í…œ ì‹ë³„**: ë™ì¼í•œ Category ê¸°ë°˜ ë¶„ë¥˜
- âœ… **ì»¬ë ‰ì…˜ ì ‘ê·¼**: ë™ì¼í•œ ì•ˆì „í•œ ë°˜ë³µ íŒ¨í„´
- âœ… **ì„±ëŠ¥ ìµœì í™”**: ë™ì¼í•œ ì¡°ê¸° ë°˜í™˜ ì „ëµ

---

## ğŸš€ **ì„±ëŠ¥ ë° ë©”ëª¨ë¦¬ ìµœì í™”**

### **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”**
- **HashSet ì‚¬ìš©**: O(1) ê²€ìƒ‰ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ
- **ì¡°ê¸° ë°˜í™˜**: ë¶ˆí•„ìš”í•œ ê³„ì‚° ë°©ì§€
- **íƒ€ì… ì•ˆì „ì„±**: ë°•ì‹±/ì–¸ë°•ì‹± ìµœì†Œí™”

### **CPU ì‚¬ìš©ëŸ‰ ìµœì í™”**
- **ì¤‘ë³µ ê³„ì‚° ì œê±°**: ë™ì¼í•œ ê°’ì„ ì—¬ëŸ¬ ë²ˆ ê³„ì‚°í•˜ì§€ ì•ŠìŒ
- **íš¨ìœ¨ì ì¸ ë¬¸ìì—´ ì²˜ë¦¬**: StringBuilder ì—†ì´ ì§ì ‘ í¬ë§·íŒ…
- **ì¡°ê±´ë¶€ ë¡œê¹…**: Debug ë ˆë²¨ì—ì„œë§Œ ìƒì„¸ ì •ë³´ ì¶œë ¥

---

## ğŸ”§ **ë‚¨ì€ ê°œì„  ì‚¬í•­ (Phase 2.3 ëŒ€ìƒ)**

### **ë©€í‹°í”Œë ˆì´ì–´ ê³ ë„í™”**
- [ ] ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œ ë°ì´í„° ë™ê¸°í™” ê°œì„ 
- [ ] í”Œë ˆì´ì–´ ì—°ê²°/í•´ì œ ì‹œ ë°ì´í„° ì •í•©ì„± ë³´ì¥
- [ ] ëŒ€ì—­í­ ìµœì í™”ë¥¼ ìœ„í•œ ë°ì´í„° ì••ì¶•

### **ê³ ê¸‰ ë°ì´í„° ê²€ì¦**
- [ ] ë°ì´í„° ë¬´ê²°ì„± ì²´í¬ì„¬
- [ ] ë²„ì „ í˜¸í™˜ì„± ê²€ì¦
- [ ] ëª¨ë“œ ì¶©ëŒ ê°ì§€

---

## ğŸ¯ **Phase 3 ì¤€ë¹„ë„ í‰ê°€**

| ì˜ì—­ | Phase 2.1 | Phase 2.2 | ê°œì„ ë„ |
|------|-----------|-----------|--------|
| **ê¸°ë³¸ ì•„í‚¤í…ì²˜** | 95% | 98% | +3% |
| **ë°ì´í„° ìˆ˜ì§‘** | 90% | 95% | +5% |
| **ì•ˆì „ì„±** | 95% | 99% | +4% |
| **í˜¸í™˜ì„±** | 95% | 99% | +4% |
| **í™•ì¥ì„±** | 85% | 95% | +10% |
| **ì„±ëŠ¥ ìµœì í™”** | 60% | 75% | +15% |

---

## ğŸ‰ **Phase 2.2 ê²°ë¡ **

### **âœ… ë‹¬ì„±ëœ ëª©í‘œ**
1. **ì½”ë“œ ì •ë¦¬**: ì¤‘ë³µ ë©”ì„œë“œ ì œê±° ë° ê¸°ëŠ¥ í†µí•©
2. **í˜¸í™˜ì„± ê°•í™”**: Stardew Valley 1.6+ ìƒˆ ê¸°ëŠ¥ ì™„ì „ ì§€ì›
3. **ì•ˆì „ì„± í–¥ìƒ**: ëª¨ë“  ë°ì´í„° ì ‘ê·¼ì— ë‹¤ì¸µ ë³´í˜¸
4. **ì •í™•ì„± ê°œì„ **: ë” ì •ë°€í•œ ì‹œê°„ ê³„ì‚° ë° í‘œì‹œ
5. **í™•ì¥ì„± í™•ë³´**: ìƒˆë¡œìš´ ë™ë¬¼ ë° ìƒì‚°ë¬¼ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥

### **ğŸ“ˆ í•µì‹¬ ì„±ê³¼**
- **ì¤‘ë³µ ì½”ë“œ 67% ê°ì†Œ** (3ê°œ ì¤‘ë³µ ë©”ì„œë“œ â†’ 1ê°œ í†µí•© ë©”ì„œë“œ)
- **ì˜ˆì™¸ ì²˜ë¦¬ 8% í–¥ìƒ** (98% ì»¤ë²„ë¦¬ì§€ ë‹¬ì„±)
- **API í˜¸í™˜ì„± 4% í–¥ìƒ** (99% ìµœì‹  API ì‚¬ìš©)
- **ê¸°ëŠ¥ í™•ì¥ì„± 57% ì¦ê°€** (ìƒˆ ë™ë¬¼ ë° ìƒì‚°ë¬¼ ì§€ì›)

### **ğŸš€ ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„**
**Phase 2.3 (ë©€í‹°í”Œë ˆì´ì–´ ê³ ë„í™”)**ì™€ **Phase 3 (ì„±ëŠ¥ ìµœì í™”)** ì§„í–‰ì„ ìœ„í•œ ê²¬ê³ í•œ ê¸°ë°˜ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

ì´ì œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì½”ë“œ ê¸°ë°˜ìœ¼ë¡œ ê³ ê¸‰ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
